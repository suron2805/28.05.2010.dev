(()=>{let t=()=>{if(document.readyState==='complete'){fetch('/event',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({domain:location.hostname,name:'pageview',url:location.href,referrer:document.referrer})})}else{let e=()=>{'complete'===document.readyState&&(t(),document.removeEventListener('readystatechange',e))};document.addEventListener('readystatechange',e)}};t(),addEventListener('popstate',()=>{setTimeout(()=>{t()},0)}),addEventListener('pageshow',e=>{e.persisted&&t()})})();